define(["connector","_","jc","jquery"],function(e){function r(){return 6e4/(n.bpm||100)}function i(){jc.start("canvas",!0),t=jc.rect(0,0,window.innerWidth,window.innerHeight,"#131013",!0).id("background"),u&&u()}function s(){var t,i=r(),s=e.currentTime(),u=n.start+Math.ceil((s-n.start)/i)*i;setTimeout(function(){o(Math.round((e.currentTime()-n.start)/i),i)},u-e.currentTime())}function o(e,t){a&&a(e,t),setTimeout(function(){s()},10)}var t,n={bpm:100,start:(new Date).getTime()};$(function(){function t(){e.attr("height",window.innerHeight),e.attr("width",window.innerWidth)}var e=$("#canvas");$(window).resize(function(){t(),jc.clear(),i()}),t(),i()}),e.socket.on("loop-stats",function(e){n=e}),s();var u,a;return{getBackground:function(){return t},onInit:function(e){u=e},onLoop:function(e){a=e},stats:n}})