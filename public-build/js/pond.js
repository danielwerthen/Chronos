define(["render-v2","jc"],function(e){function i(t){return t*e.width()}function s(t){return t*e.height()}function o(){return 1/(window.innerWidth/e.width())}function u(e,o){if(!t||!n||!r)return;if(e%2!=0)return;var u=.3+Math.random()*.4,a=.3+Math.random()*.4,f=.5-u,l=.5-a;t.animate({radius:400,opacity:0},o/.55,{type:"out",fn:"exp"},function(){this.animate({radius:.01,opacity:.5,x:i(u),y:s(a)},1)}),setTimeout(function(){n.animate({radius:350,opacity:0},o/.6,{type:"out",fn:"exp"},function(){this.animate({radius:.01,opacity:.7,x:i(u+.25*f),y:s(a+.25*l)},1)})},o/8),setTimeout(function(){r.animate({radius:300,opacity:0},o/.65,{type:"out",fn:"exp"},function(){this.animate({radius:.01,opacity:.9,x:i(u+.5*f),y:s(a+.5*l)},1)})},2*(o/8))}function a(o){if(o){var u=.3+Math.random()*.4,a=.3+Math.random()*.4,f=.5-u,l=.5-a;t=jc.circle(i(u),s(a),.01,e.currentColor(),!0).name("pond").animate({opacity:.5},1),n=jc.circle(i(u+.25*f),s(a+.25*l),.01,e.currentColor(),!0).name("pond").animate({opacity:.7},1),r=jc.circle(i(u+.5*f),s(a+.5*l),.01,e.currentColor(),!0).name("pond").animate({opacity:.9},1)}else jc(".pond").del()}function f(t){jc(".pond").animate({color:e.currentColor()},t)}var t,n,r;return{loop:u,update:a,updateColor:f}})